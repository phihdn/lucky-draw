<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

        <!-- Bootstrap CSS -->
        <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Teko:400,500,600,700&display=swap" rel="stylesheet" />
        <link
            href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,500i,700,700i|Teko&display=swap"
            rel="stylesheet"
        />

        <style>
            @import url("https://fonts.googleapis.com/css2?family=Pacifico&display=swap");
        </style>

        <title>Lucky Draw</title>
        <style>
            .footerlinks {
                color: #ffffff;
                text-decoration: none !important;
            }

            .footerlinks:hover {
                color: #ffd800;
            }
            .winnertext {
                font-weight: 500;
                font-size: 40px;
                color: #4c27a3;
            }
            .winnerno {
                background-color: #ffd800;
                font-family: "Teko", sans-serif;
                font-weight: 600;
                font-size: 75px;
                border: 2px solid #fa9747;
                border-radius: 10px;
                margin-bottom: 0px;
                color: #482cc2;
            }
            .winnername {
                background-color: #ffd800;
                font-family: "Pacifico", cursive;
                font-weight: 500;
                font-size: 40px;
                border: 2px solid #fa9747;
                border-radius: 10px;
                margin-bottom: 0px;
                color: #482cc2;
            }
            .btn {
                font-family: "Roboto", sans-serif;
                font-weight: 400;
                font-size: 25px;
            }

            #footer2 {
                background: #272727;
            }
        </style>
    </head>

    <body>
        <div class="row">
            <div class="col">
                <!-- <img src="imgs/main-header1.jpg" style="width: 100%" class="card-img-top img-fluid" /> -->
            </div>
        </div>
        <div class="container-fluid">
            <div class="row">
                <div class="col-12 mx-auto text-center">
                    <div class="card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col">
                                    <h1>Year End Party Lucky Draw</h1>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <hr />
                                </div>
                            </div>

                            <div class="row mx-auto my-sm-4">
                                <div class="col-12 mx-auto">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col">
                                                    <img
                                                        id="img1"
                                                        src="imgs/user.png"
                                                        width="150px"
                                                        class="img-fluid p-1"
                                                    />
                                                </div>
                                            </div>
                                            <div class="row mt-1">
                                                <div class="col">
                                                    <p class="winnertext" style="margin-bottom: 0px">1st</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    <hr />
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col form-group input-group-lg">
                                                    <h1 id="winnertext1" class="display-4 winnerno">0000</h1>
                                                </div>
                                            </div>
                                            <!-- <div class="row">
                                                <div class="col form-group input-group-lg">
                                                    <h1 id="winnertextName1" class="display-4 winnername"></h1>
                                                </div>
                                            </div> -->
                                            <div class="row">
                                                <div class="col form-group">
                                                    <button
                                                        id="btn1"
                                                        type="button"
                                                        class="btn btn-lg btn-block btn-success"
                                                        onclick="fn(1)"
                                                    >
                                                        Draw
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row mx-auto my-sm-4">
                                <div class="col-6 mx-auto">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col">
                                                    <img
                                                        id="img2"
                                                        src="imgs/user.png"
                                                        width="150px"
                                                        class="img-fluid p-1"
                                                    />
                                                </div>
                                            </div>
                                            <div class="row mt-1">
                                                <div class="col">
                                                    <p class="winnertext" style="margin-bottom: 0px">2nd</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    <hr />
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col form-group input-group-lg">
                                                    <h1 id="winnertext2" class="display-4 winnerno">0000</h1>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col form-group">
                                                    <button
                                                        id="btn2"
                                                        type="button"
                                                        class="btn btn-lg btn-block btn-success"
                                                        onclick="fn(2)"
                                                    >
                                                        Draw
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-6 mx-auto">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col">
                                                    <img
                                                        id="img3"
                                                        src="imgs/user.png"
                                                        width="150px"
                                                        class="img-fluid p-1"
                                                    />
                                                </div>
                                            </div>
                                            <div class="row mt-1">
                                                <div class="col">
                                                    <p class="winnertext" style="margin-bottom: 0px">3rd</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    <hr />
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col form-group input-group-lg">
                                                    <h1 id="winnertext3" class="display-4 winnerno">0000</h1>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col form-group">
                                                    <button
                                                        id="btn3"
                                                        type="button"
                                                        class="btn btn-lg btn-block btn-success"
                                                        onclick="fn(3)"
                                                    >
                                                        Draw
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row mx-auto my-sm-4">
                                <div class="col-2 mx-auto">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col">
                                                    <img
                                                        id="img4"
                                                        src="imgs/user.png"
                                                        width="150px"
                                                        class="img-fluid p-1"
                                                    />
                                                </div>
                                            </div>
                                            <div class="row mt-1">
                                                <div class="col">
                                                    <p class="winnertext" style="margin-bottom: 0px">KK-1</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    <hr />
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col form-group input-group-lg">
                                                    <h1 id="winnertext4" class="display-4 winnerno">0000</h1>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col form-group">
                                                    <button
                                                        id="btn4"
                                                        type="button"
                                                        class="btn btn-lg btn-block btn-success"
                                                        onclick="fn(4)"
                                                    >
                                                        Draw
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-2 mx-auto">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col">
                                                    <img
                                                        id="img5"
                                                        src="imgs/user.png"
                                                        width="150px"
                                                        class="img-fluid p-1"
                                                    />
                                                </div>
                                            </div>
                                            <div class="row mt-1">
                                                <div class="col">
                                                    <p class="winnertext" style="margin-bottom: 0px">KK-2</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    <hr />
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col form-group input-group-lg">
                                                    <h1 id="winnertext5" class="display-4 winnerno">0000</h1>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col form-group">
                                                    <button
                                                        id="btn5"
                                                        type="button"
                                                        class="btn btn-lg btn-block btn-success"
                                                        onclick="fn(5)"
                                                    >
                                                        Draw
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-2 mx-auto">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col">
                                                    <img
                                                        id="img6"
                                                        src="imgs/user.png"
                                                        width="150px"
                                                        class="img-fluid p-1"
                                                    />
                                                </div>
                                            </div>
                                            <div class="row mt-1">
                                                <div class="col">
                                                    <p class="winnertext" style="margin-bottom: 0px">KK-3</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    <hr />
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col form-group input-group-lg">
                                                    <h1 id="winnertext6" class="display-4 winnerno">0000</h1>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col form-group">
                                                    <button
                                                        id="btn6"
                                                        type="button"
                                                        class="btn btn-lg btn-block btn-success"
                                                        onclick="fn(6)"
                                                    >
                                                        Draw
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-2 mx-auto">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col">
                                                    <img
                                                        id="img7"
                                                        src="imgs/user.png"
                                                        width="150px"
                                                        class="img-fluid p-1"
                                                    />
                                                </div>
                                            </div>
                                            <div class="row mt-1">
                                                <div class="col">
                                                    <p class="winnertext" style="margin-bottom: 0px">KK-4</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    <hr />
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col form-group input-group-lg">
                                                    <h1 id="winnertext7" class="display-4 winnerno">0000</h1>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col form-group">
                                                    <button
                                                        id="btn7"
                                                        type="button"
                                                        class="btn btn-lg btn-block btn-success"
                                                        onclick="fn(7)"
                                                    >
                                                        Draw
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-2 mx-auto">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col">
                                                    <img
                                                        id="img8"
                                                        src="imgs/user.png"
                                                        width="150px"
                                                        class="img-fluid p-1"
                                                    />
                                                </div>
                                            </div>
                                            <div class="row mt-1">
                                                <div class="col">
                                                    <p class="winnertext" style="margin-bottom: 0px">KK-5</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    <hr />
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col form-group input-group-lg">
                                                    <h1 id="winnertext8" class="display-4 winnerno">0000</h1>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col form-group">
                                                    <button
                                                        id="btn8"
                                                        type="button"
                                                        class="btn btn-lg btn-block btn-success"
                                                        onclick="fn(8)"
                                                    >
                                                        Draw
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row mx-auto my-sm-4">
                                <div class="col-2 mx-auto">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col">
                                                    <img
                                                        id="img9"
                                                        src="imgs/user.png"
                                                        width="150px"
                                                        class="img-fluid p-1"
                                                    />
                                                </div>
                                            </div>
                                            <div class="row mt-1">
                                                <div class="col">
                                                    <p class="winnertext" style="margin-bottom: 0px">KK-6</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    <hr />
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col form-group input-group-lg">
                                                    <h1 id="winnertext9" class="display-4 winnerno">0000</h1>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col form-group">
                                                    <button
                                                        id="btn9"
                                                        type="button"
                                                        class="btn btn-lg btn-block btn-success"
                                                        onclick="fn(9)"
                                                    >
                                                        Draw
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-2 mx-auto">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col">
                                                    <img
                                                        id="img10"
                                                        src="imgs/user.png"
                                                        width="150px"
                                                        class="img-fluid p-1"
                                                    />
                                                </div>
                                            </div>
                                            <div class="row mt-1">
                                                <div class="col">
                                                    <p class="winnertext" style="margin-bottom: 0px">KK-7</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    <hr />
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col form-group input-group-lg">
                                                    <h1 id="winnertext10" class="display-4 winnerno">0000</h1>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col form-group">
                                                    <button
                                                        id="btn10"
                                                        type="button"
                                                        class="btn btn-lg btn-block btn-success"
                                                        onclick="fn(10)"
                                                    >
                                                        Draw
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-2 mx-auto">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col">
                                                    <img
                                                        id="img11"
                                                        src="imgs/user.png"
                                                        width="150px"
                                                        class="img-fluid p-1"
                                                    />
                                                </div>
                                            </div>
                                            <div class="row mt-1">
                                                <div class="col">
                                                    <p class="winnertext" style="margin-bottom: 0px">KK-8</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    <hr />
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col form-group input-group-lg">
                                                    <h1 id="winnertext11" class="display-4 winnerno">0000</h1>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col form-group">
                                                    <button
                                                        id="btn11"
                                                        type="button"
                                                        class="btn btn-lg btn-block btn-success"
                                                        onclick="fn(11)"
                                                    >
                                                        Draw
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-2 mx-auto">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col">
                                                    <img
                                                        id="img12"
                                                        src="imgs/user.png"
                                                        width="150px"
                                                        class="img-fluid p-1"
                                                    />
                                                </div>
                                            </div>
                                            <div class="row mt-1">
                                                <div class="col">
                                                    <p class="winnertext" style="margin-bottom: 0px">KK-9</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    <hr />
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col form-group input-group-lg">
                                                    <h1 id="winnertext12" class="display-4 winnerno">0000</h1>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col form-group">
                                                    <button
                                                        id="btn12"
                                                        type="button"
                                                        class="btn btn-lg btn-block btn-success"
                                                        onclick="fn(12)"
                                                    >
                                                        Draw
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-2 mx-auto">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col">
                                                    <img
                                                        id="img13"
                                                        src="imgs/user.png"
                                                        width="150px"
                                                        class="img-fluid p-1"
                                                    />
                                                </div>
                                            </div>
                                            <div class="row mt-1">
                                                <div class="col">
                                                    <p class="winnertext" style="margin-bottom: 0px">KK-10</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    <hr />
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col form-group input-group-lg">
                                                    <h1 id="winnertext13" class="display-4 winnerno">0000</h1>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col form-group">
                                                    <button
                                                        id="btn13"
                                                        type="button"
                                                        class="btn btn-lg btn-block btn-success"
                                                        onclick="fn(13)"
                                                    >
                                                        Draw
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer>
            <div id="footer2" class="container-fluid">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-12 text-center p-4">
                        <p class="lead" style="color: whitesmoke">
                            &copy All right Reversed.
                            <a class="footerlinks lead" href="youtube.com/simplesnippets" target="_blank"
                                >Simple Snippets</a
                            >
                            <a href="#" onclick="reset()">reset</a> <a href="#" onclick="stopaudio()">stop</a>
                        </p>
                    </div>
                </div>
            </div>
        </footer>

        <div id="inputDiv" stype="display: none;">
            <a href="#" onclick="loadData()">load data</a
            ><textarea id="inputData" style="height: 1400px" class="container-fluid"></textarea>
        </div>
        <textarea id="result" style="height: 1400px; display: none" class="container-fluid"></textarea>

        <script src="bootstrap/js/jquery-3.5.1.min.js"></script>
        <script src="bootstrap/js/popper.min.js"></script>
        <script src="bootstrap/js/bootstrap.min.js"></script>
        <script src="bootstrap/js/jquery.csv.js"></script>

        <script>
            var audio;
            $(document).ready(function () {
                /* $.ajax({
                    type: "GET",
                    url: "data.csv",
                    dataType: "text",
                    success: function (data) {
                        processData(data);
                    },
                }); */
                loadData();
                fillWinner();
            });

            function loadData() {
                if (typeof Storage !== "undefined") {
                    var lines1 = localStorage.getItem("lucky-data");
                    if (lines1 && lines1 != "") {
                        document.getElementById("inputDiv").style.display = "none";
                    } else {
                        document.getElementById("inputDiv").style.display = "block";
                        var data = document.getElementById("inputData").value;
                        console.log(data);
                        if (data && data != "") {
                            processData(data);
                            document.getElementById("inputDiv").style.display = "none";
                        }
                    }
                } else {
                    alert("Sorry, your browser does not support Web Storage...");
                }
            }

            function processData(allText) {
                lines = $.csv.toObjects(allText);

                if (typeof Storage !== "undefined") {
                    var lines1 = localStorage.getItem("lucky-data");

                    if (!lines1) {
                        localStorage.setItem("lucky-data", JSON.stringify(lines));
                    }
                    // Retrieve
                    lines1 = JSON.parse(localStorage.getItem("lucky-data"));
                    $("#result").empty();
                    $("#result").html(JSON.stringify(lines1, null, 2));
                    console.log(lines1);
                } else {
                    alert("Sorry, your browser does not support Web Storage...");
                }
            }

            function getRandomRow(prize) {
                if (typeof Storage !== "undefined") {
                    var lines = JSON.parse(localStorage.getItem("lucky-data"));
                    var randomRowIndex = Math.floor(Math.random() * lines.length);
                    var result = lines[randomRowIndex];
                    localStorage.setItem(prize, JSON.stringify(result));

                    var drawing = 70000;
                    var drawx = 0;
                    for (var i = 0; i < drawing; i++) {
                        setTimeout(function () {
                            var r = Math.floor(Math.random() * lines.length);
                            result = lines[r];
                            document.getElementById("winnertext" + prize).innerHTML = result.id;
                            document.getElementById("btn" + prize).innerText = result.name;
                            drawx++;
                            if (drawx == drawing) {
                                fillWinner();
                            }
                        }, 3000);
                    }
                    lines.splice(randomRowIndex, 1); // Remove the item from the array
                    localStorage.setItem("lucky-data", JSON.stringify(lines));
                } else {
                    document.getElementById("result").innerHTML = "Sorry, your browser does not support Web Storage...";
                }
            }
            function getRandomInt(min, max) {
                min = Math.ceil(min);
                max = Math.floor(max);

                return Math.floor(Math.random() * (max - min + 1)) + min;
            }

            function fillWinner() {
                if (typeof Storage !== "undefined") {
                    for (let i = 1; i <= 13; i++) {
                        var winnerstored = JSON.parse(localStorage.getItem(i));
                        if (winnerstored) {
                            document.getElementById("winnertext" + i).innerHTML = winnerstored.id;
                            //document.getElementById("winnertextName" + i).innerHTML = winnerstored.name;
                            document.getElementById("btn" + i).innerText = winnerstored.name;
                            document.getElementById("img" + i).src = "imgs/cup.png";
                            document.getElementById("btn" + i).disabled = true;
                        }
                    }
                } else {
                    document.getElementById("result").innerHTML = "Sorry, your browser does not support Web Storage...";
                }
            }

            function fn(textboxno) {
                getRandomRow(textboxno);
                //fillWinner();

                //var x = getRandomInt(2, 43);
                /* if (textboxno == 1) {
                    document.getElementById("winnertext1").innerHTML = winner.id;
                    document.getElementById("winnertextName1").innerHTML = winner.name;
                    document.getElementById("img1").src = "imgs/cup.png";
                    document.getElementById("btn1").disabled = true;
                } else if (textboxno == 2) {
                    document.getElementById("winnertext2").innerHTML = x;
                    document.getElementById("img2").src = "imgs/cup.png";
                } else if (textboxno == 3) {
                    document.getElementById("winnertext3").innerHTML = x;
                    document.getElementById("img3").src = "imgs/cup.png";
                } else if (textboxno == 4) {
                    document.getElementById("winnertext4").innerHTML = x;
                    document.getElementById("img4").src = "imgs/cup.png";
                } else if (textboxno == 5) {
                    document.getElementById("winnertext5").innerHTML = x;
                    document.getElementById("img5").src = "imgs/cup.png";
                } */

                if (textboxno == 1) {
                    audio = new Audio("audio/Champion.mp3");
                }
                audio.play();
            }
            function reset() {
                localStorage.clear();
                location.reload();
            }
            function stopaudio() {
                audio.pause();
            }
        </script>
    </body>
</html>
